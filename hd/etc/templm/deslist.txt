%doctype;
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <!-- $Id: deslist.txt,v 5.19 2007-07-25 13:15:19 ddr Exp $ -->
  <!-- Copyright (c) 1998-2007 INRIA -->
  <!-- Copyright (c) 1998-2007 INRIA -->
  <!-- Modified mickroue(a)yahoo.fr 2012/04/03 geneweb-6.04 templ=templm -->
  <title>%nn;
    %apply;a_of_b_gr_eq_lev%with;
      [*descendants]%nn;
    %and;
      %if;(public_name != "")%public_name;%else;%first_name;%end;
      %if;(qualifier != "") %qualifier;%end;
      %sp;%surname;
    %end;
  </title>
  <meta name="robots" content="none"%/>
  <meta http-equiv="Content-Type" content="text/html; charset=%charset;"%/>
  <meta http-equiv="Content-Style-Type" content="text/css"%/>
  <link rel="shortcut icon" href="%image_prefix;/favicon_gwd.png"%/>
  %include.css;
  %base_header;
</head>

%( <!-- Begin define (used in ancsosa.txt, deslist.txt)--> %)
%define;married_to(is_male, date_place)
  %apply;link_mod_fam()
  %if;("is_male" = 1)
    %if;are_married;[married%t to:::date_place]0%nn;
    %elseif;are_not_married;[relationship%t to:::date_place]0%nn;
    %elseif;are_engaged;[engaged%t to:::date_place]0%nn;
    %elseif;is_no_sexes_check;[relationship%t to:::date_place]0%nn;
    %elseif;is_no_mention;date_place [with]%nn;
    %end;
  %else;
    %if;are_married;[married%t to:::date_place]1%nn;
    %elseif;are_not_married;[relationship%t to:::date_place]1%nn;
    %elseif;are_engaged;[engaged%t to:::date_place]1%nn;
    %elseif;is_no_sexes_check;[relationship%t to:::date_place]1%nn;
    %elseif;is_no_mention;date_place [with]%nn;
    %end;
  %end;
  …
  %if;are_divorced;[divorced]%divorce_date;…%nn;
  %elseif;are_separated;[separated]…%nn;
  %end;
%end;

%define;link_mod_fam()
    %if;(not cancel_links and wizard)
      <a target="blank" href="%prefix;m=MOD_FAM;i=%family.index;;ip=%index;;ins_ch=2" title="[*modify::family/families]0">
      &amp;%marriage_date.year;&nbsp;</a>
    %end;
%end;

%define;symbol2(xx)
    %if;(xx.has_siblings)
      &diams;%nn;
    %elseif;(xx.has_parents)
      &loz;%nn;
    %else;
      -%nn;
    %end;
%end;

%define;symbol1(xx)
  %if;(xx.has_sosa)
    <span class="color_sosa">%apply;symbol2("xx")</span>%nn;
  %else;
    %apply;symbol2("xx")
  %end;
%end;

%define;symbol(xx)
  %if;(wizard and not cancel_links)
     <a target="_blank" href="%prefix;m=MOD_IND;i=%xx.index;" title="[*modify::person/persons]0">%apply;symbol1("xx")</a>%nn;
  %elseif(evar.t="N")
    %apply;symbol1("xx")
  %end;
%end;

%define;link2(xx,yy)
  %if;(cancel_links or xx.is_restricted)%yy;
  %else;
    <a href="%prefix;%xx.access;">%yy;</a>%nn;
  %end;
  %apply;symbol("xx")
%end;

%define;somebody_long_info(xx)
  %if;xx.has_aliases;
    %foreach;xx.alias;, <em><strong>%alias;</strong></em>%end;
  %end;
  %if;(("xx" = "ancestor" or xx.sosa_in_list = "") and xx.has_nobility_titles)
    <em>%nn;
    %foreach;xx.nobility_title;, %nobility_title;%end;
    </em>%nn;
  %end;
  %if;(xx.has_linked_pages and xx.has_linked_page.HEAD), %xx.linked_page.HEAD;%end;
  %if;(xx.has_public_name or xx.has_qualifiers)
    , <em>(%xx.first_name; %xx.surname;)</em>%nn;
  %end;
  %if;(evar.alias="on")
    <small>%nn;
    %if;xx.has_surnames_aliases;
      %foreach;xx.surname_alias;
        , <em>(%surname_alias;)</em>%nn;
      %end;
    %end;
    %if;xx.has_first_names_aliases;
      %foreach;xx.first_name_alias;
        , <em>(%first_name_alias;)</em>%nn;
      %end;
    %end;
    </small>%nn;
  %end;
  %if;(xx.has_birth_date or xx.has_birth_place)
    , %if;xx.is_male;[born]0%elseif;xx.is_female;[born]1%else;[born]2%end;
    %if;xx.has_birth_date; %xx.on_birth_date;%end;
    %if;xx.has_birth_place;, %xx.birth_place;%end;
  %end;
  %if;(xx.has_baptism_date or xx.has_baptism_place)
    , %if;xx.is_male;[baptized]0%elseif;xx.is_female;[baptized]1%nn;
    %else;[baptized]2%end;
    %if;xx.has_baptism_date; %xx.on_baptism_date;%end;
    %if;xx.has_baptism_place;, %xx.baptism_place;%end;
  %end;
  %if;xx.is_dead;, %xx.died;
    %if;(xx.has_death_date) %xx.on_death_date;%end;
    %if;(xx.has_death_place), %xx.death_place;%end;
  %end;
  %if;xx.is_buried;,
    %if;xx.is_male;[buried]0%else;[buried]1%end;
    %if;xx.has_burial_date; %xx.on_burial_date;%end;
    %if;xx.has_burial_place;, %xx.burial_place;%end;%nl;
  %end;
  %if;xx.is_cremated;,
    %if;xx.is_male;[cremated]0%else;[cremated]1%end;
    %if;xx.has_cremation_date; %xx.on_cremation_date;%end;
    %if;xx.has_cremation_place;, %xx.cremation_place;%end;%nl;
  %end;
  %if;(xx.has_linked_pages and xx.has_linked_page.DEATH), %xx.linked_page.DEATH;%end;
  %if;xx.computable_death_age;%sp;
    ([age at death:] %xx.death_age;)%nn;
  %end;
%end;

%define;somebody_extra_info(xx)
  %if;xx.has_occupation;, <span class="highlight">%xx.occupation;</span>%end;
  %if;(xx.has_linked_pages and xx.has_linked_page.OCCU), %xx.linked_page.OCCU;%end;
  %if;(evar.rel = "on" and xx.has_relations)
    %foreach;xx.relation;%nn;
       ; %relation_type; :
      %if;has_relation_him;
        %apply;link2("relation_him","relation_him")
        %apply;info2("relation_him")
      %end;
      %if;has_relation_her;
        %if;has_relation_him;, %end;
        %apply;link2("relation_her","relation_her")
        %apply;info2("relation_her")
      %end;
    %end;
    %foreach;xx.related;%nn;
       ; %related_type; :
       %apply;link2("related","related")
       %apply;info2("related")
    %end;
  %end;
%end;

%define;somebody(xx,yy)
  <strong>%apply;link2("xx","yy")</strong>%nn;
  %apply;somebody_long_info("xx")
  %apply;somebody_extra_info("xx")
%end;

%define;somebody_spouse_parent1(xx)
  <strong>%apply;link2("spouse.xx","spouse.xx")</strong>%nn;
  %apply;info2("spouse.xx")
%end;

%define;somebody_spouse_parent()
  %if;(evar.parents = "on" and spouse.has_parents)%sp;
  <br%/>   
    <small>
    %apply;a_of_b%with;
      %if;(spouse.is_male)[son/daughter/child]0
      %else;[son/daughter/child]1%end;
    %and;
      %apply;somebody_spouse_parent1("father") [and]
      %apply;somebody_spouse_parent1("mother")
    %end;
    </small>%nn;
  %end;
%end;

%( <!-- end modified mickroue (used in ancsosa.txt, deslist.txt)--> %)

%define;info2(xx)
  %xx.title;%xx.dates;
%end;

%define;tothegen(xx)
  [*to the %s generation:::xx]%nn;
%end;

%define;togen(xx)
  %if;(xx = 0)[*specify::generation/generations]0%nn;
  %elseif;(xx = 1)[*to the children]%nn;
  %elseif;(xx = 2)[*to the grandchildren]%nn;
  %elseif;(xx = 3)[*to the great-grandchildren]%nn;
  %else;
    %apply;tothegen%with;
      %apply;nth([nth (generation)], xx)
    %end;
  %end;
%end;

%define;link_notes(xx)
  %if;((evar.notes = "on" and (xx.has_notes or xx.has_linked_page.BNOTE))
      or (evar.src = "on" and (xx.has_sources or xx.has_linked_page.BIBLIO)))
    %sp;%[%if;(not cancel_links)<a id="l_%count;" href="#notes-%count;">%nn;%end;
    %if;(evar.notes = "on" and (xx.has_notes or xx.has_linked_page.BNOTE))
      [*note/notes]0%sp;
      %apply;add_in_sorted_list(10000+count,count,xx.notes,"",xx.linked_page.BNOTE)
    %else;[*source/sources]0%sp;%nn;
      %apply;add_in_sorted_list(10000+count,count,"","","")
    %end;
    %if;(evar.src = "on" and (xx.has_sources or xx.has_linked_page.BIBLIO))
      %if;(xx.has_linked_page.BIBLIO)
        %apply;add_in_sorted_list(10000+count,count,"src_on","BIBLIO",xx.linked_page.BIBLIO)
      %end;
      %foreach;xx.source;
        %apply;add_in_sorted_list(10000+count,count,"src_on",source_type,source)
      %end;
    %end;
    <strong>%count;</strong>%if;(not cancel_links)</a>%end;%]
  %end;
%end;

%define;descendants_by_list(xx, yy, curlev, maxlev, famlev)
  %if;(curlev = 0)<p>%nl;%end;
  %apply;somebody("xx","yy")%sp;
  %incr_count;
  %apply;link_notes("xx")
  %apply;lazy_print%with;<br%/>%nl;%end;
  %foreach;xx.family;
    %if;(evar.spouse="on")
      %if;(family_cnt != 1 and curlev = 0)<p>%nl;%end;
      %lazy_force;   
      %apply;capitalize%with;
        %apply;married_to%with;
          %xx.is_male;
        %and;
          %if;(on_marriage_date != "") %on_marriage_date;%end;
          %if;(marriage_place != ""), %marriage_place;%end;
        %end;
      %end;<br%/>   %nl;
      %apply;somebody("spouse","spouse")
      %incr_count;
      %apply;link_notes("spouse")
      %apply;somebody_spouse_parent()
      %if;(evar.witn = "on" and has_witnesses)%nl;<br%/>    [witness/witnesses]1 :
        %foreach;witness;
          %if;(not is_first),%nl;%end;
          %apply;link2("witness","witness")
          %apply;info2("witness")
        %end;%nn;
      %end;
      %if;(evar.comm = "on" and has_comment)%nl;(%comment;)%end;
    %end;
    %if;(curlev < maxlev)
      %if;(curlev = 0 or
           evar.t = "M" and xx.is_male or
           evar.t = "F" and xx.is_female or
           evar.t = "L")
        %if;(family.desc_level < famlev)
          , [see further]
          %apply;lazy_print%with;<br%/>%nl;%end;
        %elseif;(family.desc_level > famlev)
          , [see above]
          %apply;lazy_print%with;<br%/>%nl;%end;
        %elseif;has_children;, [having as children] : 
          %family.set_infinite_desc_level;
          %if;(curlev = 0)</p>%nl;%end;
          <ol style="list-style-type:lower-latin">
          %foreach;child;
            <li class=%if;(has_sosa)"border_sosa"%nn;
                      %else;"border_family_%has_families; border_sex_%sex;"%nn;
                      %end;>
            %if;(evar.alwsurn = "yes")
              %apply;descendants_by_list("child", "child", curlev+1,
                                         maxlev, famlev+1)
            %else;
              %apply;descendants_by_list("child", "child_name", curlev+1,
                                         maxlev, famlev+1)
            %end;
            </li>
          %end;
          </ol>
          %apply;lazy_print%with;%end;
        %else;
          %if;(curlev = 0)%nl;</p>%nl;
          %else;%apply;lazy_print%with;<br%/>%nl;%end;
          %end;.
        %end;
      %elseif;has_children;, …
      %end;
    %else;%nl;
      %apply;lazy_print%with;<br%/>%nl;%end;
    %end;
  %end;
%end;

%define;by_list(xx)
  <p>
  %apply;togen(xx).
  </p>
  %reset_count;
  %apply;descendants_by_list("self", "self", 0, xx, 0)%nl;
  <p>
    %foreach;descendant_level;
      %if;(level = desc_lev)
        [*total] : %number_of_descendants; [[person/persons]1@(c)],
        ([spouses not included] = %expr(count -1 - number_of_descendants.v))
      %end;
    %end;
  </p>
%end;

%(   Main   %)
<body%body_prop; id="deslist">
%message_to_wizard;

<h1>%nn;
  %apply;a_of_b_gr_eq_lev%with;
    [*descendants]%nn;
  %and;
    %if;(public_name != "")%public_name;%else;%first_name;%end;
    %if;(qualifier != "") <em>%qualifier;</em>%end;
    %sp;%surname;
    %if;(alias != "") <em>(%alias;)</em>%end;
  %end;
</h1>

%if;not cancel_links;
  <div class="menu2">
    %if;has_referer;
      <a href="%referer;" title="[back]">&lt;&lt;</a>
    %end;
      <a href="%prefix;" title="[visualize/show/hide/summary]3">^^</a>
  </div>
%end;

%let;desc_lev;
  %if;(bvar.max_desc_level = "")%apply;min(evar.v, max_desc_level, 12)
  %else;%apply;min(evar.v, max_desc_level, bvar.max_desc_level)
  %end;
%in;

%empty_sorted_list;
%apply;by_list(desc_lev)

%if;(evar.notes = "on" or evar.src = "on")
  <hr%/>
  <h3>%if;(evar.notes = "on")[*note/notes]1%else;[*source/sources]1%end;</h3>
  <dl class = "notes_src">
    %foreach;sorted_list_item;
      %if;(item.3 != "src_on")
        <dt><strong>%nn;
        %if;(not cancel_links)
          <a id="notes-%item.2;" href="#l_%item.2;">%nn;
            %item.2; :%nn;
          </a>
        %else;
          %item.2; :%nn;
        %end;
        </strong></dt>
        %if;(item.5 != "")<dd>&gt;&gt; %item.5;</dd>%end;
        %if;(item.3 != "")<dd>%item.3;</dd>%end;
        %if;(evar.notes = "on" and evar.src = "on" and next_item.3 = "src_on")
          <dt><em>[*source/sources]1 :</em></dt>
        %end;
      %elseif;(item.4 = "BIBLIO")
        <dd><em>&gt;&gt; %item.5;</em></dd>
      %else;
        <dd><em> - %item.4; : %item.5;</em></dd>
      %end;
    %end;
  </dl>
%end;
  %base_trailer;
  %copyright;
</body>
</html>
