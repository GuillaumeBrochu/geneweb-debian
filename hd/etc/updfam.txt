<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <!-- $Id: updfam.txt,v 4.35 2004/12/14 10:04:38 ddr Exp $ -->
  <!-- Copyright (c) 1998-2005 INRIA -->
  <meta name="ROBOTS" content="NONE">
  <title>%nn;
    %if;(evar_m = "ADD_FAM" or evar_m = "ADD_FAM_OK")[*add::family/families]0
    %elseif;(evar_m = "ADD_PAR")[*add::family/families]0
    %elseif;(evar_m = "MOD_FAM" or evar_m = "MOD_FAM_OK")
      [*modify::family/families]0 # %evar_i;
    %elseif;(evar_m = "MRG_FAM" or evar_m = "MRG_FAM_OK" or
             evar_m = "MRG_MOD_FAM_OK")
      [*merge::family/families]1 # %evar_i;
    %end;
  </title>
%base_header;
</head>
<body%body_prop;>
%message_to_wizard;

<script>
<!--
function checkCreate(create, redirect)
{
  if (create.value != "create") redirect.focus();
}
-->
</script>

%define;date(xlab,xvar,xdate)
  <table border=1>
    <tr>
      <td>xlab</td>
      <td>
        %if;([ !dates order]0 = "ddmmyy");
          [year/month/day]2
          <input name=xvar_dd size=2 maxlength=2 value="%xdate.day;">
          [year/month/day]1
          <input name=xvar_mm size=2 maxlength=2 value="%xdate.month;">
          [year/month/day]0
          <input name=xvar_yyyy size=6 maxlength=6 value="%xdate.year;">
        %else;
          [year/month/day]0
          <input name=xvar_yyyy size=6 maxlength=6 value="%xdate.year;">
          [year/month/day]1
          <input name=xvar_mm size=2 maxlength=2 value="%xdate.month;">
          [year/month/day]2
          <input name=xvar_dd size=2 maxlength=2 value="%xdate.day;">
        %end;
      </td>
      <td>
        ...[or]0 [text]0
        <input name=xvar_text size=15 maxlength=30 value="%xdate.text;">
      </td>
    </tr>
  </table>
  <table border=1>
    <tr>
      <td>[*calendar/calendars]0
        <select name=xvar_cal>
          <option value=G%if;(xdate.calendar = "gregorian") selected%end;
          >[*gregorian/julian/french/hebrew]0
          <option value=J%if;(xdate.calendar = "julian") selected%end;
          >[*gregorian/julian/french/hebrew]1
          <option value=F%if;(xdate.calendar = "french") selected%end;
          >[*gregorian/julian/french/hebrew]2
          <option value=H%if;(xdate.calendar = "hebrew") selected%end;
          >[*gregorian/julian/french/hebrew]3
        </select>
      </td>
      <td>[*precision]0
        <select name=xvar_prec>
          <option value=-%if;(xdate.prec = "") selected%end;>-
          <option value=sure%if;(xdate.prec = "sure") selected%end;
              >[*exact]0
          <option value=about%if;(xdate.prec = "about") selected%end;
              >[*about (date)]0
          <option value=maybe%if;(xdate.prec = "maybe") selected%end;
              >[*possibly (date)]0
          <option value=before%if;(xdate.prec = "before") selected%end;
              >[*before (date)]0
          <option value=after%if;(xdate.prec = "after") selected%end;
              >[*after (date)]0
          <option value=oryear%if;(xdate.prec = "oryear") selected%end;
              >&lt;- [*or] -&gt;
          <option value=yearint%if;(xdate.prec = "yearint") selected%end;
              >&lt;- [*between (date)] -&gt;
        </select>
        <input name=xvar_oryear size=5 maxlength=5 value="%xdate.oryear;">
      </td>
    </tr>
  </table>
%end;

%define;source(xvar,xx)
  <table border=1>
    <tr>
      <td>[*source/sources]0</td>
      <td><input name=xvar_src size=40 maxlength=200 value="%xx_src;"></td>
    </tr>
  </table>
%end;

%define;small_date(kind,xvar,xx,verbose,xp)
  <td>
    %if;([ !dates order]0 = "ddmmyy");
      <input name=xvar_dd size=2 maxlength=2 value="%xx.create.kind_day;"xp>/
      <input name=xvar_mm size=2 maxlength=2 value="%xx.create.kind_month;"xp>/
      <input name=xvar_yyyy size=6 maxlength=6 value="%xx.create.kind_year;"xp>
    %else;
      <input name=xvar_yyyy size=6 maxlength=6 value="%xx.create.kind_year;"xp
      >-
      <input name=xvar_mm size=2 maxlength=2 value="%xx.create.kind_month;"xp>-
      <input name=xvar_dd size=2 maxlength=2 value="%xx.create.kind_day;"xp>
    %end;
  </td>
  %if;("verbose" = "true")<td>[*place]</td>%end;
  <td colspan=2>
    <input name=xvar_pl size=20 maxlength=200 value="%xx.create.kind_place;"xp>
  </td>
%end;

%define;birth(xvar,xx,verbose,xp)
  <td>[*birth]</td>
  %apply;small_date("birth","xvarb","xx","verbose","xp")
%end;

%define;death(xvar,xx,verbose,xp)
  <td>[*death]</td>
  %apply;small_date("death","xvard","xx","verbose","xp")
%end;

%define;parent(xcnt,xx)
  <table border=1>
    <tr>
      <td>[*first name/first names]0</td>
      <td>
        <input name=paxcnt_fn size=23 maxlength=200 value="%xx.first_name;">
      </td>
      <td align=right>[*number]</td>
      <td>
        <input name=paxcnt_occ size=5 maxlength=8 value="%xx.occ;">
      </td>
      <td>
        <select name=paxcnt_p>
        <option value=create%if;(xx.create = "create") selected%end;
	>[*create]0
        <option value=link%if;(xx.create = "link") selected%end;%sp;
	>[*link]0
        </select>
      </td>
    </tr>
    <tr>
      <td>[*surname/surnames]0</td>
      <td colspan=4>
        <input name=paxcnt_sn size=40 maxlength=200 value="%xx.surname">
      </td>
    </tr>
  </table>
  <table border=1>
    <tr>
      %apply;birth("paxcnt","xx","true",
                   " onFocus=checkCreate(paxcnt_p,paxcnt_fn)")
    </tr>
    <tr>
      %apply;death("paxcnt","xx","true",
                   " onFocus=checkCreate(paxcnt_p,paxcnt_fn)")
    </tr>
  </table>
%end;

%define;insert_parent(xcnt)
  <table border=1>
    <tr>
      <td>
        [*insert::|<input name=ins_paxcnt_n size=1 maxlength=1 value=1> |
        parents]
        <input type=checkbox name=ins_paxcnt value=on>
      </td>
    </tr>
  </table>
%end;

<h1 align=center><font color=%highlight;>%nn;
%if;(evar_m = "ADD_FAM" or evar_m = "ADD_FAM_OK")
  [*add::family/families]0
%elseif;(evar_m = "ADD_PAR")
  [*add::family/families]0
%elseif;(evar_m = "MOD_FAM" or evar_m = "MOD_FAM_OK")
  [*modify::family/families]0 # %evar_i;
%elseif;(evar_m = "MRG_FAM" or evar_m = "MRG_FAM_OK" or
         evar_m = "MRG_MOD_FAM_OK")
  [*merge::family/families]1 # %evar_i;
%end;
</font></h1>

<form method=POST action="%action;">
%hidden;
<input type=hidden name=digest value="%digest;">
%if;(evar_ip != "")<input type=hidden name=ip value="%evar_ip;">%nl;%end;
%if;(evar_i != "")<input type=hidden name=i value="%evar_i;">%nl;%end;
%if;(evar_m = "ADD_FAM" or evar_m = "ADD_FAM_OK")
  <input type=hidden name=m value=ADD_FAM_OK>%nl;
%elseif;(evar_m = "ADD_PAR")
  <input type=hidden name=m value=ADD_FAM_OK>%nl;
%elseif;(evar_m = "MOD_FAM" or evar_m = "MOD_FAM_OK")
  <input type=hidden name=m value=MOD_FAM_OK>%nl;
%elseif;(evar_m = "MRG_FAM" or evar_m = "MRG_FAM_OK" or
         evar_m = "MRG_MOD_FAM_OK")
  <input type=hidden name=i2 value="%evar_i2;">
  %if;(evar_ini1 != "" and evar_ini2 != "")
    <input type=hidden name=ini1 value="%evar_ini1;">
    <input type=hidden name=ini2 value="%evar_ini2;">
  %end;
  <input type=hidden name=m value=MRG_MOD_FAM_OK>%nl;
%end;

%foreach;parent;
%if;(cvar_multi_parents != "yes");<h4>%parent.himher;</h4>%end;
%apply;parent(cnt, "parent")
%if;(cvar_multi_parents = "yes");%apply;insert_parent(cnt)%end;
%end;

<h4>[*marriage/marriages]0</h4>
<input type=radio name=mrel value=marr%if;(mrel = "marr") checked%end;
>[*married]
<input type=radio name=mrel value=not_marr%if;(mrel = "not_marr") checked%end;
>[*not married]
<input type=radio name=mrel value=engaged%if;(mrel = "engaged") checked%end;
>[*engaged]
<input type=radio name=mrel value=nsck%if;(mrel = "nsck") checked%end;
>[*no sexes check]<br>
<input type=radio name=mrel value=no_ment%if;(mrel = "no_ment") checked%end;
>[*no mention]
<table border=1>
  <tr>
    <td>[*place]</td>
    <td>
      <input name=marr_place size=40 maxlength=200 value="%marriage_place;">
    </td>
  </tr>
</table>

%apply;date([*date]0, "marr", "marriage")
%apply;source("marr", "marriage")

<h4>[*witness/witnesses]1</h4>

<table border=1>
  <tr>
    <td>[*insert::witness/witnesses]0
      <input type=checkbox name=ins_witn0 value=on></td>
  </tr>
</table>

%foreach;witness;
  <table border=1>
    <tr>
      <td>[*first name/first names]0</td>
      <td>
        <input name=witn%cnt;_fn size=23 maxlength=200%sp;
         value="%witness.first_name;">
      </td>
      <td align=right>[*number]</td>
      <td>
        <input name=witn%cnt;_occ size=5 maxlength=8 value="%witness.occ;">
      </td>
      <td>
        <select name=witn%cnt;_p>
          <option value=link%nn;
           %if;(witness.create = "link") selected%end;>[*link]0
          <option value=create%nn;
           %if;(witness.create = "create") selected%end;>[*create]0
        </select>
      </td>
    </tr>
    <tr>
      <td>[*surname/surnames]0</td>
      <td colspan=3>
        <input name=witn%cnt;_sn size=40 maxlength=200%sp;
         value="%witness.surname;">
      </td>
      <td>
        <input type=radio name=witn%cnt;_sex value=N%nn;
         %if;(witness.sex = "neuter") checked%end;>?
        <input type=radio name=witn%cnt;_sex value=M%nn;
         %if;(witness.sex = "male") checked%end;>[M/F]0
        <input type=radio name=witn%cnt;_sex value=F%nn;
         %if;(witness.sex = "female") checked%end;>[M/F]1
      </td>
    </tr>
  </table>
  <table border=1>
    <tr>
      <td>[*insert::witness/witnesses]0
      <input type=checkbox name=ins_witn%cnt; value=on></td>
    </tr>
  </table>
%end;

<h4>[*divorce]</h4>

<input type=radio name=div value=not_divorced%nn;
 %if;(divorce = "not_divorced") checked%end;>[*not divorced]
<input type=radio name=div value=divorced%nn;
 %if;(divorce = "divorced") checked%end;>[*divorced]
<input type=radio name=div value=separated%nn;
 %if;(divorce = "separated") checked%end;>[*separated]
%apply;date([*date]0, "div", "divorce")

<h4>[*comment]</h4>

<table border=1>
  <tr>
    <td><input name=comment size=50 maxlength=200 value="%comment;"></td>
  </tr>
</table>

<h4>[*child/children]1</h4>

%define;insert_child(xcnt)
  <table border=1>
    <tr>
      <td>
        [*insert::|<input name=ins_chxcnt_n size=1 maxlength=1 value=1> |
        child/children]
        <input type=checkbox name=ins_chxcnt value=on>
      </td>
    </tr>
  </table>
%end;

%define;child(xcnt)
  <table border=1>
    <tr>
      <td>[*first name/first names]0</td>
      <td colspan=2>
        <input name=chxcnt_fn size=23 maxlength=200 value="%child.first_name;">
      </td>
      <td align=right>[*number]</td>
      <td>
        <input name=chxcnt_occ size=5 maxlength=8 value="%child.occ;">
      </td>
    </tr>
    <tr>
      <td>[*surname/surnames]0</td>
      <td colspan=4>
        <input name=chxcnt_sn size=40 maxlength=200%sp;
         value="%nn;
           %if;
             ((evar_m = "ADD_FAM_OK" or
               evar_m = "MOD_FAM" or evar_m = "MOD_FAM_OK" or
               evar_m = "MRG_FAM_OK" or evar_m = "MRG_MOD_FAM_OK") and
              child.surname = father.surname)
           %else;%child.surname;%end;">
      </td>
    </tr>
    <tr>
      <td>
        <select name=chxcnt_p>
          <option value=link%if;(child.create = "link") selected%end;
           >[*link]0
          <option value=create%if;(child.create = "create") selected%end;
           >[*create]0
        </select>
      </td>
      %apply;birth("chxcnt", "child", "false",
                   " onFocus=checkCreate(chxcnt_p,chxcnt_fn)")
    </tr>
    <tr>
      <td>
        <input type=radio name=chxcnt_sex value=N%nn;
         %if;(child.sex = "neuter") checked%end;>?
        <input type=radio name=chxcnt_sex value=M%nn;
         %if;(child.sex = "male") checked%end;>[M/F]0
        <input type=radio name=chxcnt_sex value=F%nn;
         %if;(child.sex = "female") checked%end;>[M/F]1
      </td>
      %apply;death("chxcnt", "child", "false",
                   " onFocus=checkCreate(chxcnt_p,chxcnt_fn)")
    </tr>
  </table>
%end;

<ul>
<li>
%apply;insert_child("0")
%foreach;child;
  <li>
  %apply;child(cnt)
  <li>
  %apply;insert_child(cnt)
%end;
</ul>

<h4>[*source/sources]0</h4>

<table border=1>
  <tr>
    <td>[*person/persons]1</td>
    <td>
      <input name=psrc size=50 maxlength=200 value="%nn;
       %if;(evar_psrc != "")%evar_psrc;%else;%evar_dsrc;%end;">
    </td>
  </tr>
  <tr>
    <td>[*family/families]0</td>
    <td>
      <input name=src size=50 maxlength=200 value="%fsources;">
      <input type=checkbox name=rdsrc value=on%sp;
       %if;(evar_rdsrc = "on") checked%end;>
    </td>
  </tr>
</table>

%if;(cvar_origin_file = "on")
  <input name=origin_file size=50 maxlength=200 value="%origin_file;">
%end;

<p>
<input type=submit value=Ok>
</form>

<p>
<a href="%prefix;"><img src="%image_prefix;/gwlogo.png"
 alt=... width=64 height=72 align=right border=0></a>
<br>
%copyright;
%base_trailer;
</body>
</html>
