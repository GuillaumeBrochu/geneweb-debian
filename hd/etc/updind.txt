<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <!-- $Id: updind.txt,v 4.15 2004/12/14 10:04:38 ddr Exp $ -->
  <!-- Copyright (c) 1998-2005 INRIA -->
  <meta name="ROBOTS" content="NONE">
  <title>%nn;
    %if;(evar_m = "MRG_IND_OK" or evar_m = "MRG_MOD_IND_OK");
      [*merge::person/persons]1 # %index;
    %elseif;(evar_m = "MOD_IND" or evar_m = "MOD_IND_OK");
      [*modify::person/persons]0 # %index;
    %else;[*add::person/persons]0%end;
  </title>
%base_header;
</head>
<body%body_prop;>
%message_to_wizard;

<script>
<!--
function sourceIfData(src, place, year, text)
{
  if (place.value == "" && year.value == "" && text.value == "" &&
      src.value == "") {
    place.focus();
  }
}
function setDead()
{
  document.forms%[0].death.value = "Death";
  changeDeath();
}
function changeDeath()
{
  var color = "black";
  if (document.forms%[0].death.value != "Death") color = "#b0b0b0";
  document.forms%[0].death_place.style.color = color;
  document.forms%[0].death_dd.style.color = color;
  document.forms%[0].death_mm.style.color = color;
  document.forms%[0].death_yyyy.style.color = color;
  document.forms%[0].death_text.style.color = color;
  document.forms%[0].death_cal.style.color = color;
  document.forms%[0].death_prec.style.color = color;
  document.forms%[0].death_oryear.style.color = color;
  document.forms%[0].death_src.style.color = color;
}
-->
</script>

%define;date(xlab,xvar,xdate,xcond)
  <table border=1>
  <tr>
  <td>xlab</td>
  <td>
    %if;([ !dates order]0 = "ddmmyy");
      [year/month/day]2
      <input name=xvar_dd size=2 maxlength=2 value="%xdate.day;"xcond>
      [year/month/day]1
      <input name=xvar_mm size=2 maxlength=2 value="%xdate.month;"xcond>
      [year/month/day]0
      <input name=xvar_yyyy size=5 maxlength=6 value="%xdate.year;"xcond>
    %else;
      [year/month/day]0
      <input name=xvar_yyyy size=5 maxlength=6 value="%xdate.year;"xcond>
      [year/month/day]1
      <input name=xvar_mm size=2 maxlength=2 value="%xdate.month;"xcond>
      [year/month/day]2
      <input name=xvar_dd size=2 maxlength=2 value="%xdate.day;"xcond>
    %end;
  </td>
  <td>
  ...[or]0 [text]0
  <input name=xvar_text size=15 maxlength=30 value="%xdate.text;"xcond>
  </td>
  </table>
  <table border=1>
  <tr>
  <td>[*calendar/calendars]0
  <select name="xvar_cal"xcond>
  <option value=G%if;xdate.cal_gregorian; selected%end;
  >[*gregorian/julian/french/hebrew]0
  <option value=J%if;xdate.cal_julian; selected%end;
  >[*gregorian/julian/french/hebrew]1
  <option value=F%if;xdate.cal_french; selected%end;
  >[*gregorian/julian/french/hebrew]2
  <option value=H%if;xdate.cal_hebrew; selected%end;
  >[*gregorian/julian/french/hebrew]3
  </select>
  </td>
  <td>[*precision]0
  <select name="xvar_prec"xcond>
  <option value=-%if;xdate.prec_no; selected%end;>-
  <option value=sure%if;xdate.prec_sure; selected%end;>[*exact]0
  <option value=about%if;xdate.prec_about; selected%end;>[*about (date)]0
  <option value=maybe%if;xdate.prec_maybe; selected%end;>[*possibly (date)]0
  <option value=before%if;xdate.prec_before; selected%end;>[*before (date)]0
  <option value=after%if;xdate.prec_after; selected%end;>[*after (date)]0
  <option value=oryear%if;xdate.prec_oryear; selected%end;
      >&lt;- [*or] -&gt;
  <option value=yearint%if;xdate.prec_yearint; selected%end;
      >&lt;- [*between (date)] -&gt;
  </select>
  <input name=xvar_oryear size=5 maxlength=5 value="%xdate.oryear;"xcond>
  </td>
  </tr>
  </table>
%end;
%define;source(xx)
  <table border=1>
  <tr>
  <td>[*source/sources]0</td>
  <td>
  <input name=xx_src size=40 maxlength=200 value="%xx_src;"
   onFocus='
     sourceIfData
       (document.forms%[0].xx_src, document.forms%[0].xx_place,
        document.forms%[0].xx_yyyy, document.forms%[0].xx_text)'>
  </td>
  </tr>
  </table>
%end;

<h1 align=center><font color=%highlight;>%nn;
%if;(evar_m = "MRG_IND_OK" or evar_m = "MRG_MOD_IND_OK");
  [*merge::person/persons]1 # %index;
%elseif;(evar_m = "MOD_IND" or evar_m = "MOD_IND_OK");
  [*modify::person/persons]0 # %index;
%else;
  [*add::person/persons]0%end;
</font></h1>

<form method=POST action="%action;">
%hidden;
<input type=hidden name=digest value="%digest;">
<input type=hidden name=i value="%index;">
%if;(evar_m = "MRG_IND_OK" or evar_m = "MRG_MOD_IND_OK");
  %if;evar_i2;<input type=hidden name=i2 value="%evar_i2;">%end;%nl;
  %if;(evar_ini1 and evar_ini2);
    <input type=hidden name=ini1 value="%evar_ini1;">
    <input type=hidden name=ini2 value="%evar_ini2;">
  %end;
  <input type=hidden name=m value=MRG_MOD_IND_OK>
%elseif;(evar_m = "MOD_IND" or evar_m = "MOD_IND_OK");
  <input type=hidden name=m value=MOD_IND_OK>
%else;
  <input type=hidden name=m value=ADD_IND_OK>
%end;

<table border=1>
<tr>
<td>[*first name/first names]0</td>
<td>
<input name="first_name" size=30 maxlength=200 value="%first_name;"></td>
<td>[*number]0</td>
<td>
<input name=occ size=5 maxlength=8 value="%occ;"></td>
</tr>
<tr>
<td>[*surname/surnames]0</td>
<td>
<input name=surname size=40 maxlength=200 value="%surname;"></td>
<td>[*sex]</td>
<td>
<input type=radio name=sex value=M%if;is_male; checked%end;>[M/F]0
<input type=radio name=sex value=F%if;is_female; checked%end;>[M/F]1
<input type=radio name=sex value=N%if;not(is_male or is_female); checked%end;>?
</td>
</tr>
<tr>
<td>[*public name]</td>
<td colspan=3>
<input name=public_name size=40 value="%public_name;">
</td>
</tr>
<tr>
<td>[*image/images]0</td>
<td colspan=3>
<input name=image size=50 value="%image;">
</td>
</tr>
</table>

<br>

<table border=1>
%if;has_qualifiers;
  %foreach;qualifier;
    <tr>
    <td>[*qualifier]0</td>
    <td>
    <input name="qualifier%cnt;" size=30 value="%qualifier;">
    <td>[*insert::qualifier]</td>
    <td><input type=checkbox name="add_qualifier%cnt;" value=on></td>
    </tr>
  %end;
%elseif;(cvar_propose_qualifier != "no");
  <tr>
  <td>[*qualifier]0</td>
  <td>
  <input name="qualifier0" size=30 value="">
  <td>[*insert::qualifier]</td>
  <td><input type=checkbox name="add_qualifier0" value=on></td>
  </tr>
%end;
%if;has_aliases;
  %foreach;alias;
    <tr>
    <td>[*alias]0</td>
    <td>
    <input name="alias%cnt;" size=30 value="%alias;">
    <td>[*insert::alias]</td>
    <td><input type=checkbox name="add_alias%cnt;" value=on></td>
    </tr>
  %end;
%elseif;(cvar_propose_alias != "no");
  <tr>
  <td>[*alias]0</td>
  <td>
  <input name="alias0" size=30 value="">
  <td>[*insert::alias]</td>
  <td><input type=checkbox name="add_alias0" value=on></td>
  </tr>
%end;
</tr>
%if;has_first_names_aliases;
  %foreach;first_name_alias;
    <tr>
    <td>[*first name alias]0</td>
    <td>
    <input name="first_name_alias%cnt;" size=30 value="%first_name_alias;">
    <td>[*insert::first name alias]</td>
    <td><input type=checkbox name="add_first_name_alias%cnt;" value=on></td>
    </tr>
  %end;
%else;
  <tr>
  <td>[*first name alias]0</td>
  <td>
  <input name="first_name_alias0" size=30 value="">
  <td>[*insert::first name alias]</td>
  <td><input type=checkbox name="add_first_name_alias0" value=on></td>
  </tr>
%end;
%if;has_surnames_aliases;
  %foreach;surname_alias;
    <tr>
    <td>[*surname alias]0</td>
    <td>
    <input name="surname_alias%cnt;" size=30 value="%surname_alias;">
    <td>[*insert::surname alias]</td>
    <td><input type=checkbox name="add_surname_alias%cnt;" value=on></td>
    </tr>
  %end;
%else;
  <tr>
  <td>[*surname alias]0</td>
  <td>
  <input name="surname_alias0" size=30 value="">
  <td>[*insert::surname alias]</td>
  <td><input type=checkbox name="add_surname_alias0" value=on></td>
  </tr>
%end;
</table>

<h4>[*birth]</h4>

<table border=1>
<tr>
<td>[*born]2...</td>
<td>[*place]</td>
<td>
<input name=birth_place size=40 maxlength=200 value="%birth_place;">
</td>
</tr>
</table>

%apply;date([*date]0, "birth", "birth", "")

%apply;source("birth")

<p>

<table border=1>
<tr>
<td>[*baptized]2...</td>
<td>[*place]</td>
<td>
<input name=bapt_place size=40 maxlength=200 value="%bapt_place;">
</td>
</tr>
</table>

%apply;date([*date]0, "bapt", "bapt", "")

%apply;source("bapt")

<h4>[*death]</h4>

<table border=1>
<tr>
<td>
<select name=death>
  %if;(not has_birth_date and dont_know_if_dead);
  <option value=Auto selected> -
  %end;
  <option value=NotDead%if;not_dead; selected%end; onClick="changeDeath()"
  >[*alive]2
  <option value=DontKnowIfDead%if;(dont_know_if_dead and has_birth_date);%sp;
   selected%end; onClick="changeDeath()">[*don't know]0%nl;
  <option value=Death%if;(death.year != "" or death.text != "" or
   dead_dont_know_when); selected%end; onClick="changeDeath()">[*died]2...
  <option value=DeadYoung%if;died_young; selected%end;%sp;
  onClick="changeDeath()">[*died young]2
</select>
</td>
<td>
[*place]0
<input name=death_place size=40 maxlength=200 value="%death_place;"%sp;
 onfocus="setDead()">
</td>
</tr>
</table>

%apply;date([*date]0, "death", "death", " onFocus=setDead()")

<table border=1>
<tr>
<td>
<input type=radio name=death_reason value=Killed%if;dr_killed;
%sp;checked%end; onClick='setDead()'>[*killed (in action)]2
<input type=radio name=death_reason value=Murdered%if;dr_murdered;
%sp;checked%end; onClick='setDead()'>[*murdered]2
<input type=radio name=death_reason value=Executed%if;dr_executed;
%sp;checked%end; onClick='setDead()'>[*executed (legally killed)]2
<input type=radio name=death_reason value=Disappeared%if;dr_disappeared;
%sp;checked%end; onClick='setDead()'>[*disappeared]2
<input type=radio name=death_reason value=Unspecified%if;dr_unspecified;
%sp;checked%end; onClick='setDead()'>[*unspecified]2
</td>
</tr>
</table>

%apply;source("death")

<h4>[*burial]</h4>

<table border=1>
<tr>
<td>
<select name=burial>
<option value=UnknownBurial%if;bt_unknown_burial; selected%end;>-
<option value=Buried%if;bt_buried; selected%end;>[*buried]2
<option value=Cremated%if;bt_cremated; selected%end;>[*cremated]2
</select>
</td>
<td>
[*place]0
<input name=burial_place size=40 maxlength=200 value="%burial_place;">
</td>
</tr>
</table>

%apply;date([*date]0, "burial", "burial", "")

%apply;source("burial")

<h4>[*occupation]</h4>

<table border=1>
<tr>
<td>
<input name=occu size=50 maxlength=200 value="%occupation;">
</td>
</tr>
</table>

<h4>[*relation/relations]1</h4>

%define;insert_relation(xx)
  <table border=1>
  <tr>
  <td>
  [*insert::relation/relations]0
  <input type=checkbox name=add_relationxx value=on>
  </td>
  </tr>
  </table>
%end;
%define;relation_type(xx)
  <table border=1>
  <tr>
  <td>
  <select name=rxx_type>
  <option value=Undef%if;relation.rt_empty); selected%end;> -
  <option value=Adoption%if;relation.rt_adoption; selected%end;>%sp;
    [*adoptive father/adoptive mother/adoptive parents]2
  <option value=Recognition%if;relation.rt_regognition; selected%end;>%sp;
    [*recognizing father/recognizing mother/recognizing parents]2
  <option value=CandidateParent%if;relation.rt_candidate_parent; selected%end;
    > [*candidate father/candidate mother/candidate parents]2
  <option value=GodParent%if;relation.rt_godparent; selected%end;>%sp;
    [*godfather/godmother/godparents]2
  <option value=FosterParent%if;relation.rt_foster_parent; selected%end;>%sp;
    [*foster father/foster mother/foster parents]2
  </select>
  </td>
  </tr>
  </table>
%end;
%define;one_relation(xcnt,xvar,xrel,xsex)
 <table border=1>
    <tr>
      <td>[*first name/first names]0</td>
      <td>
        <input name=rxcnt_xvar_fn size=23 maxlength=200%sp;
         value="%relation.xrel.first_name;">
      </td>
      <td align=right>[*number]</td>
      <td>
        <input name=rxcnt_xvar_occ size=5 maxlength=8%sp;
         value="%relation.xrel.occ;">
      </td>
      <td>
        <select name=rxcnt_xvar_p>
        <option value=link%if;relation.xrel.link; selected%end;>[*link]0
        <option value=create%if;relation.xrel.create; selected%end;
          >[*create]0
        </select>
      </td>
    </tr>
    <tr>
      <td>[*surname/surnames]0</td>
      <td colspan=4>
        <input name=rxcnt_xvar_sn size=40 maxlength=200%sp;
         value="%relation.xrel.surname;">
         ([sex]0 = xsex)
      </td>
    </tr>
  </table>
%end;

%apply;insert_relation("0")
<p>
%if;has_relations;
  %foreach;relation;
    %apply;relation_type(cnt)
    <p>
    %apply;one_relation(cnt,"fath","r_father",[M/F]0)
    %apply;one_relation(cnt,"moth","r_mother",[M/F]1)
    <p>
    %apply;insert_relation(cnt)
    <p>
  %end;
%else;
  %apply;relation_type("1")
  <p>
  %apply;one_relation("1","fath","r_father",[M/F]0)
  %apply;one_relation("1","moth","r_mother",[M/F]1)
  <p>
  %apply;insert_relation("1")
  <p>
%end;

<h4>[*title/titles]1</h4>

%define;insert_title(xx)
  <table border=1>
  <tr>
  <td>
  [*insert::|<input name=ins_titlexx_n size=1 maxlength=1 value=1> |
  title/titles]
  <input type=checkbox name=ins_titlexx value=on>
  </td>
  </tr>
  </table>
%end;
%define;one_title(xcnt)
  <table border=1>
    <tr>
      <td>[*title/titles]0</td>
      <td>
        <input name=t_identxcnt size=15 value="%title.t_ident;">
      </td>
      <td>[*estate]0</td>
      <td colspan=2>
        <input name=t_placexcnt size=30 value="%title.t_estate;">
      </td>
    </tr>
    <tr>
      <td>[*name]0</td>
      <td>
        <input name=t_namexcnt size=20 value="%title.t_name;">
      </td>
      <td>[*nth]0</td>
      <td>
        <input name=t_nthxcnt size=3 value="%title.t_nth;">
      </td>
      <td>
        [*main title]0
        <input type=checkbox name=t_main_titlexcnt value=on%sp;
         %if;title.t_main; checked%end;>
      </td>
    </tr>
  </table>
  %apply;date([*begin]0, "t_date_startxcnt", "title_date_start", "")
  %apply;date([*end]0, "t_date_endxcnt", "title_date_end", "")
%end

%apply;insert_title("0")
<p>
%if;has_titles;
  %foreach;title;
    %apply;one_title(cnt)
    <p>
    %apply;insert_title(cnt)
    <p>
  %end;
%else;
  %apply;one_title("1")
  <p>
  %apply;insert_title("1")
  <p>
%end;

<table border=1>
  <tr>
    <td>[*access]0</td>
    <td>
      <input type=radio name=access%sp;
       value=IfTitles%if;acc_if_titles; checked%end;>
      [*if titles]0
      <input type=radio name=access%sp;
       value=Public%if;acc_public; checked%end;>
      [*public]0
      <input type=radio name=access%sp;
       value=Private%if;acc_private; checked%end;>
      [*private]0
    </td>
  </tr>
</table>

<h4>[*note/notes]1</h4>

<textarea name=notes rows=6 cols=70 wrap=soft>%notes;</textarea>

<h4>[*source/sources]0</h4>

<table border=1>
  <tr>
    <td>
      <input name=src size=50 maxlength=200%sp; value="%sources;">
    </td>
  </tr>
</table>

<p>
<input type=submit value=Ok>
</form>

<a href="%prefix;"><img src="%image_prefix;/gwlogo.png"
 alt=... width=64 height=72 align=right border=0></a>
<br>
%copyright;
%base_trailer;
</body>
</html>
